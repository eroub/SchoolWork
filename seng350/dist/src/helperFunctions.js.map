{"version":3,"file":"helperFunctions.js","sourceRoot":"","sources":["../../src/helperFunctions.ts"],"names":[],"mappings":"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","sourcesContent":["import { CustomerModel } from \"./models/customerModel\";\r\nimport { ProductModel } from \"./models/productModel\";\r\n\r\nclass Helpers {\r\n\r\n    public ID404(res: any) {\r\n        res.status(404)\r\n            .send({\r\n                message: \"No user with associated ID. Check the entered number.\",\r\n                status: res.status,\r\n            });\r\n    }\r\n\r\n    public shoe404(res: any) {\r\n        res.status(404)\r\n            .send({\r\n                message: \"No shoe found with the given id.\",\r\n                status: res.status,\r\n            });\r\n    }\r\n\r\n    public async getMaxUser() {\r\n        const c = new CustomerModel();\r\n        const users: any = await c.get_users();\r\n        let max: number = 0;\r\n        for (const item in users) {\r\n            if (users.hasOwnProperty(item)) {\r\n                if (users[item].user_id > max) {\r\n                    max = users[item].user_id;\r\n                }\r\n            }\r\n        }\r\n        return max;\r\n    }\r\n\r\n    public async getMaxShoe() {\r\n        const p = new ProductModel();\r\n        const shoes: any = await p.getAllDB();\r\n        let max: any = 0;\r\n        for (const item in shoes) {\r\n            if (shoes.hasOwnProperty(item)) {\r\n                if (shoes[item].shoe_id > max) {\r\n                    max = shoes[item].shoe_id;\r\n                }\r\n            }\r\n        }\r\n        return max;\r\n    }\r\n\r\n    public async getAllUserShoes() {\r\n        const c = new CustomerModel();\r\n        const shoes = await c.get_all_keys();\r\n        return shoes;\r\n    }\r\n\r\n    public async getUserShoes(userID: any) {\r\n        const userKeys = await this.getUserKeys(userID);\r\n        const Shoes = await this.getAllDbShoes();\r\n        const userShoes: any[] = [];\r\n        for (const item in userKeys) {\r\n            if (userKeys.hasOwnProperty(item)) {\r\n                const key = userKeys[item];\r\n                const shoe = this.getShoeInfo(key.shoe_id, Shoes);\r\n                key[\"name\"] = shoe.brand + \" \" + shoe.model + \" \" + shoe.colorway;\r\n                key[\"size\"] = shoe.size;\r\n                key[\"current_price\"] = shoe.current_price;\r\n                key[\"retail_price\"] = shoe.retail_price;\r\n                userShoes.push(key);\r\n            }\r\n        }\r\n        return userShoes;\r\n    }\r\n\r\n    public async getUserInfo(queryint: number) {\r\n        const userIf = new CustomerModel();\r\n        let userInfo = null;\r\n        try {\r\n            userInfo = await userIf.userInfo(queryint);\r\n        } catch {\r\n            return false;\r\n        }\r\n        if (userInfo.length !== 0) {\r\n            return userInfo[0];\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public getShoeInfo(shoeID: number, Shoes: any) {\r\n        for (const item in Shoes) {\r\n            if (Shoes.hasOwnProperty(item)) {\r\n                const shoe = Shoes[item];\r\n                if (shoe.shoe_id === shoeID) {\r\n                    return shoe;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public async getUserKeys(userID: any) {\r\n        const userIf = new CustomerModel();\r\n        const userKeys: any = await userIf.getKeys(userID);\r\n        return userKeys;\r\n    }\r\n\r\n    public async isUser(userID: any) {\r\n        const userIF = new CustomerModel();\r\n        return await userIF.isUser(userID);\r\n    }\r\n\r\n    /* returns every shoe in db */\r\n    public async getAllDbShoes() {\r\n        let allShoes = null;\r\n        const shoeIf = new ProductModel();\r\n        try {\r\n            allShoes = await shoeIf.getAllDB();\r\n        } catch {\r\n            return false;\r\n        }\r\n        if (allShoes) {\r\n            return allShoes;\r\n        }\r\n        return [];\r\n    }\r\n\r\n    public findUserShoe(shoeID: any, userShoes: any) {\r\n        for (const item in userShoes) {\r\n            if (userShoes.hasOwnProperty(item)) {\r\n                const shoe = userShoes[item];\r\n                if (shoe._id.toString() === shoeID.toString()) {\r\n                    return shoe;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public setNet(shoelist: any) {\r\n        let net: number = 0;\r\n        let sunk: number = 0;\r\n        let total: number = 0;\r\n        let num: number = 0;\r\n        for (const item in shoelist) {\r\n            if (shoelist.hasOwnProperty(item)) {\r\n                const shoe = shoelist[item];\r\n                net = net + parseInt(shoe.current_price, 10) - parseInt(shoe.purchase_price, 10);\r\n                sunk = sunk + parseInt(shoe.purchase_price, 10);\r\n                total = total + parseInt(shoe.current_price, 10);\r\n                num++;\r\n            }\r\n        }\r\n        return [net, sunk, total, num];\r\n    }\r\n\r\n    public async getUsers() {\r\n        const userArr = await new CustomerModel().get_users();\r\n        return userArr;\r\n    }\r\n\r\n    public async getShoe(shoeId: number) {\r\n        const shoeIf = new ProductModel();\r\n        const shoe = await shoeIf.getOneShoe(shoeId);\r\n        if (shoe) {\r\n            return shoe;\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n\r\n    /* public async getUserShoes(userKeys: any) {\r\n        const shoeIf = new ProductModel();\r\n        const uShoes = await shoeIf.getAllShoes(userKeys);\r\n        return uShoes;\r\n    } */\r\n\r\n}\r\n\r\nexport = new Helpers();\r\n"]}